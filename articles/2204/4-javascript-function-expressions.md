# 【JavaScriptの入門】関数式

JavaScriptには、関数を作るための方法がいくつか存在します。
その一つに、関数を変数に代入して扱う関数式というものがあります。

今回は、関数式とは何か、また使い方について解説していきます。

## 関数式
関数式とは、関数を変数に代入して値として扱う式のことです。
定義した関数式は、変数名を呼び出すことで参照することができます。

関数式の定義は、他の値と同じように変数に代入して行います。
```javascript
const 変数名 = function() {
  実行する処理;
};
```
関数式は以下の要素で構成されています。
* 変数名：let / const＋任意の名前＋代入演算子```=```
* ```function```キーワード：関数宣言に必要な予約語
* 関数の中身：ブロック```{}```＋実行する処理＋セミコロン```;```

関数式は、関数宣言と異なり、```function```キーワードの後ろに書く関数名は省略できます。
関数名が無くても、変数名を使用して関数を参照することができるからです。
```javascript
// 関数式は関数名を省略できる
const　変数名 = function(){
};

// 関数宣言は関数名の省略ができない
function 関数名() {
}
```
このように、名前を持たない関数であることから、無名関数や匿名関数と呼ばれることもあります。

厳密には、関数名を付けて関数式を定義することもできますが、関数名を関数の外から呼び出すことはできません。
関数の中からは呼び出すことができるため、意図的に関数の中で呼び出したい場合に利用されますが、一般的には関数式は関数名を付けずに使われます。

次のコードを見てください。
```javascript
const sayHi = function() {
  console.log('Hello');
};
```
上記は、関数を作成し、それを変数sayHiに代入したコードです。
関数は、定義されている内容に関わらず、sayHiという変数に格納されている値です。

変数が呼び出されると、そこに代入されている関数が事項され、結果的に```'Hello'```とコンソールに出力されます。

## 関数式の呼び出し
関数式で定義した関数は、変数名と括弧```()```で呼び出すことができます。
```javascript
変数名();
```

では、先ほど定義した関数を呼び出してみます。
```javascript
const sayHi = function() {
  console.log('Hello');
};
// 関数の呼び出し
sayHi(); 
// "Hello!"
```

このように関数を呼び出すことで、関数の中に記述してある```console.log('Hello!')```を実行できます。

## 末尾のセミコロン
通常、文の末尾にはセミコロン```;```を付けますが、コードブロックを持つ構文構造の末尾にはセミコロン```;```は必要ありません。
```javascript
let value = 3; // セミコロン要

if (true) {
  console.log('true')
} // セミコロン不要
```

関数宣言の場合も、コードブロックを持つ文に値するため、末尾のセミコロンは不要です。
```javascript
function sayHi() {
  ...
} // セミコロン不要
```

しかし、関数式は末尾にセミコロンを持ちます。
```javascript
const sayHi = function() {
  ..
}; // セミコロン要
```
一見、コードブロックがあるからセミコロンは不要なのではないかと思うかもしれません。
しかし、関数式で定義された関数は、通常の文の中で使われていることが見えてきます。
```javascript
const sayHi = ...;
```
このセミコロンは関数式とは関係なく、文の終わりであることが分かります。
そのため、通常の文と同じように、文末のセミコロンが推奨されるということです。

## 引数と戻り値のある関数式
関数式には、オプションで引数と戻り値を指定することができます。
関数宣言と同じように任意の値を扱うことが可能です。

```javascript
const calcTotal = function(x, y) {
  let sum = x + y;
  return sum;
};

let total = calcTotal(10, 5); 
console.log(total); // 15
```

関数式は関数を変数に代入できるように、関数呼び出し時の引数に関数式で宣言した変数を指定することができます。
```javascript
// 平均値を求める関数
const calcAverage = function(x, y) {
  let average = (x + y) / 2;
  return average;
};

// 数値を表示する関数
function showNum(x, y, func) {
  let sum = func(x, y);
  console.log(sum);
}

// calcSum関数の呼び出し
// 3番目の引数に変数calcAverage（関数）を指定
showNum(10, 5, calcAverage);

// 7.5
```
関数```showNum```を呼び出す際に、3番目の引数に変数```calcAverage```（関数）を指定しています。
そうすることで、関数```showNum```の引数```func```に関数式で定義した平均値を求める関数が代入されます。

少し応用的な使い方のため、関数式が他の関数の引数に使われることがあることだけおさえておけば問題ありません。

## まとめ
今回は、関数式の使い方を解説しました。



